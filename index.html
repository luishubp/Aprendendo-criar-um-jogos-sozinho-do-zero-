<!DOCTYPE html>
<html>
<head>
    <title>Jogo da Cobrinha</title>
    <style>
        /* HTML/CSS: Deixa o fundo escuro e centraliza o jogo */
        body { background-color: #222; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; color: white; font-family: Arial, sans-serif; }
        canvas { border: 2px solid #fff; background-color: #000; }
    </style>
</head>
<body>

    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <script>
        // --- CONFIGURAÇÃO INICIAL (Variáveis) ---
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        const tamanhoQuadrado = 20; // Tamanho de cada pedaço da cobra
        const totalQuadrados = 20;  // 400px / 20 = 20 quadrados de largura
        
        let velocidadeX = 0;
        let velocidadeY = 0;
        
        // A Cobra começa no meio da tela
        let cabecaX = 10;
        let cabecaY = 10;
        
        // Corpo da cobra (começa vazia, mas vai crescer)
        let rastro = [];
        let cauda = 5; // Tamanho inicial

        // Comida (Maçã)
        let macaX = 15;
        let macaY = 15;

        // --- O "MOTOR" DO JOGO (Roda 15 vezes por segundo) ---
        window.onload = function() {
            setInterval(jogo, 1000/15); 
            document.addEventListener("keydown", controle);
        }

        function jogo() {
            // Move a cabeça
            cabecaX += velocidadeX;
            cabecaY += velocidadeY;

            // Lógica: Se atravessar a parede, aparece do outro lado
            if(cabecaX < 0) cabecaX = totalQuadrados - 1;
            if(cabecaX > totalQuadrados - 1) cabecaX = 0;
            if(cabecaY < 0) cabecaY = totalQuadrados - 1;
            if(cabecaY > totalQuadrados - 1) cabecaY = 0;

            // Pinta o fundo de preto (limpa a tela anterior)
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Pinta a cobra
            ctx.fillStyle = "lime";
            for(let i = 0; i < rastro.length; i++) {
                ctx.fillRect(rastro[i].x * tamanhoQuadrado, rastro[i].y * tamanhoQuadrado, tamanhoQuadrado - 2, tamanhoQuadrado - 2);
                
                // Verifica se bateu no próprio corpo
                if(rastro[i].x == cabecaX && rastro[i].y == cabecaY) {
                    velocidadeX = 0;
                    velocidadeY = 0;
                    cauda = 5; // Reinicia o jogo
                }
            }

            // Adiciona a posição atual da cabeça ao rastro
            rastro.push({x:cabecaX, y:cabecaY});
            
            // Apaga o rastro antigo se a cobra não comeu
            while(rastro.length > cauda) {
                rastro.shift();
            }

            // Verifica se comeu a maçã
            if(macaX == cabecaX && macaY == cabecaY) {
                cauda++; // Cresce
                // Gera nova maçã em lugar aleatório
                macaX = Math.floor(Math.random() * totalQuadrados);
                macaY = Math.floor(Math.random() * totalQuadrados);
            }

            // Pinta a maçã
            ctx.fillStyle = "red";
            ctx.fillRect(macaX * tamanhoQuadrado, macaY * tamanhoQuadrado, tamanhoQuadrado - 2, tamanhoQuadrado - 2);
        }

        // --- CONTROLE (Teclado) ---
        function controle(event) {
            switch(event.keyCode) {
                case 37: // Esquerda
                    velocidadeX = -1; velocidadeY = 0;
                    break;
                case 38: // Cima
                    velocidadeX = 0; velocidadeY = -1;
                    break;
                case 39: // Direita
                    velocidadeX = 1; velocidadeY = 0;
                    break;
                case 40: // Baixo
                    velocidadeX = 0; velocidadeY = 1;
                    break;
            }
        }
    </script>
</body>
</html>
